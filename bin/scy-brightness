#!/bin/sh

controlFile='/sys/class/backlight/nv_backlight/brightness'
defaultAmount='10'

current() {
	cat "$controlFile"
}

set_to() {
	echo "$1" > "$controlFile"
}

mod_by() {
	curr="$(current)"
	diff="$1"
	if [ "$diff" = '-' -o "$diff" = '+' ]; then
		diff="$diff$defaultAmount"
	fi
	new="$(($curr$diff))"
	if [ "$new" -gt 100 ]; then
		new=100
	elif [ "$new" -lt 0 ]; then
		new=0
	fi
	set_to "$new"
}

case "$1" in
	[0-9]|[0-9][0-9]|100)
		set_to "$1"
		;;
	-*|+*)
		mod_by "$1"
		;;
	'')
		current
		;;
esac
